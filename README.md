# Infantry_project

20180810  新建工程 添加can 串口+dma+空闲中断遥控   

20180902  添加陀螺仪

20180917   增加键盘鼠标操作




```
graph TB
A(HAL库配置层)-->B(遥控接收数据)
B-->C(底盘数据)
B-->D(云台数据)
C-->E(can)
D-->E
C-->F(控制层)
D-->F
C-->H(裁判系统)
C-->I(陀螺仪)
D-->I
D-->J
C-->J(控制器)
J-->E
J-->H
J-->I
J-->F
D-->H
H-->F
E-->F
I-->F
F-->G(用户层)
```












































### 云台控制流程



```
graph TB
A(锁区)-->B


```




###  锁区
```
graph TB
A-->wB
```


```
graph TB
A(电机情况)-->B1[正转 ]
A-->B2[反转]
B1-->C1[加速]
B1-->C2[减速]
B2-->C3[加速]
B2-->C4[减速]
C1-->D1[加速度正]
C1-->D2[加速度负]    
C2-->D3[加速度正]
C2-->D4[加速度负]
C3-->D5[加速度正]
C3-->D6[加速度负]
C4-->D7[加速度正]
C4-->D8[加速度负]

```


## 速度PID


```
graph TB
A(差=目标-真实)-->B1[正 真>0]
B1-->C1(加速 差>0)
C1-->D1(正 差-上差>0)
D1-->Z(PID计算)
C1-->D2(负  差-上差<0)
D2-->E1(加速度等零)
E1-->Z

    

```
